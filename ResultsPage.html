<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results</title>
    <link rel="stylesheet" href="ResultPgStyle.css">
</head>
<body>
<div class="container">
    <header class="header">
        <h1>Events & Things to do in<span class="blue-text"> New Hampshire</span></h1>
    </header>
    <div class="resultspage-container">
        <div id="favorite-list" class="favorite-list">
            <h3>Favorites</h3>
            <ul id="favorites"></ul>
        </div>
        <!-- Added title for the events section -->
        <div id="events" class="events-container">
            <h2>Events</h2> <!-- Title for the events section -->
            <div id="results" class="results-container"></div>
        </div>
        <!-- Added title for the suggestions section -->
        <div id="suggestions" class="suggestions-container">
            <h2>Suggestions</h2> <!-- Title for the suggestions section -->
        </div>
    </div>
</div>

<script>
    async function getData() {
        const storedData = localStorage.getItem('formattedData');
        const data = JSON.parse(storedData);

        if (!data) {
            console.error('No data found');
            return;
        }

        const eventsContainer = document.getElementById('results');
        data.events.forEach(event => {
            const eventElement = document.createElement('div');
            eventElement.classList.add('event');
            eventElement.innerHTML = `
                <img src="${event.imageUrl}" alt="Event image" class="event-image">
                <div class="event-info">
                    <h3 class="event-title">${event.name}</h3>
                    <p class="event-date">Date: ${event.date} | Time: ${event.time}</p>
                    <p class="event-location">Location: ${event.location}</p>
                    <a href="${event.url}" class="event-link" target="_blank">Event Details</a>
                </div>
            `;
            eventsContainer.appendChild(eventElement);
        });
    }

    function displaySuggestions() {
        const storedData = localStorage.getItem('formattedData');
        if (!storedData) {
            console.error('No data found in localStorage.');
            return;
        }

        const data = JSON.parse(storedData);
        if (!data.suggestions || data.suggestions.length === 0) {
            console.log('No suggestions available.');
            return;
        }

        const suggestionsContainer = document.getElementById('suggestions');
        suggestionsContainer.innerHTML = ''; // Clear before appending new items

        const fragment = document.createDocumentFragment();
        data.suggestions.forEach(suggestion => {
            const listItem = document.createElement('li');
            listItem.textContent = suggestion;
            fragment.appendChild(listItem);
        });

        suggestionsContainer.appendChild(fragment);
    }

    displaySuggestions();
    getData();
</script>

</body>
</html>
